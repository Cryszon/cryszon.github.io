---
import type { CollectionEntry } from "astro:content";
import { Icon } from "astro-icon/components";
import LinkOrText from "./LinkOrText.astro";
import PillBadge from "./PillBadge.astro";

interface Props {
  tool: CollectionEntry<"tools">;
  numberOfSubTools?: number;
}

const { tool, numberOfSubTools = 0 } = Astro.props;
---

<div>
  <LinkOrText
    class="relative"
    href={tool.body || numberOfSubTools ? `/tools/${tool.id}/` : ""}
  >
    <div class="flex absolute -top-3 right-0 items-center gap-1">
      {numberOfSubTools > 0 && <PillBadge text={`+ ${numberOfSubTools}`} />}
      {
        tool.data.favorite && (
          <Icon
            class="w-6 h-6 text-theme-primary"
            name="material-symbols/favorite-outline-rounded"
          />
        )
      }
    </div>
    <Icon
      class="mx-auto h-full w-full max-w-16 max-h-16"
      name={tool.data.icon ?? tool.data.defaultIcon}
    />
    <span class="block pt-4 text-center wrap-break-word">
      {tool.data.title}
    </span>
  </LinkOrText>
</div>
