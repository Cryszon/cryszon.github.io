---
import type { CollectionEntry } from "astro:content";
import ToolsGridItem from "./ToolsGridItem.astro";
import { getSubTools } from "../utils/getSubTools";

interface Props {
  tools: Tool[];
}

type Tool = CollectionEntry<"tools">;

const { tools } = Astro.props;

/**
 * Return the number of sub-tools for a specific tool
 */
const getNumberOfSubTools = async (tool: Tool): Promise<number> => {
  return (await getSubTools(tool)).length;
};
---

<div
  class="grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-x-4 gap-y-8 mt-16"
>
  {
    tools.map(async (tool) => (
      <ToolsGridItem
        tool={tool}
        numberOfSubTools={await getNumberOfSubTools(tool)}
      />
    ))
  }
</div>
